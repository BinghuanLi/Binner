      Unnamed: 0  entries  error                key     ...      target  totalWeight vor_point  vor_region
0              0      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001716        -1          -1
1              1      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001087        -1          -1
2              2      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000492        -1          -1
3              3      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001167        -1          -1
4              4      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000973        -1          -1
5              5      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000742        -1          -1
6              6      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000095        -1          -1
7              7      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001143        -1          -1
8              8      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000226        -1          -1
9              9      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000119        -1          -1
10            10      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000084        -1          -1
11            11      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000168        -1          -1
12            12      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000755        -1          -1
13            13      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000188        -1          -1
14            14      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000262        -1          -1
15            15      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001147        -1          -1
16            16      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001685        -1          -1
17            17      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000720        -1          -1
18            18      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001200        -1          -1
19            19      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001300        -1          -1
20            20      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000687        -1          -1
21            21      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001793        -1          -1
22            22      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000005        -1          -1
23            23      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001772        -1          -1
24            24      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001267        -1          -1
25            25      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001165        -1          -1
26            26      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001174        -1          -1
27            27      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001948        -1          -1
28            28      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000120        -1          -1
29            29      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001581        -1          -1
...          ...      ...    ...                ...     ...         ...          ...       ...         ...
3159        3159      1.0   0.25   ttJets_SigRegion     ...           3     0.130632        -1          -1
3160        3160      1.0   0.25   ttJets_SigRegion     ...           3     0.015711        -1          -1
3161        3161      1.0   0.25   ttJets_SigRegion     ...           3     0.011299        -1          -1
3162        3162      1.0   0.25   ttJets_SigRegion     ...           3     0.003119        -1          -1
3163        3163      1.0   0.25   ttJets_SigRegion     ...           3     0.007439        -1          -1
3164        3164      1.0   0.25   ttJets_SigRegion     ...           3     0.000813        -1          -1
3165        3165      1.0   0.25   ttJets_SigRegion     ...           3     0.049458        -1          -1
3166        3166      1.0   0.25   ttJets_SigRegion     ...           3     0.074798        -1          -1
3167        3167      1.0   0.25   ttJets_SigRegion     ...           3     0.003680        -1          -1
3168        3168      1.0   0.25   ttJets_SigRegion     ...           3     0.139374        -1          -1
3169        3169      1.0   0.25   ttJets_SigRegion     ...           3     0.055522        -1          -1
3170        3170      1.0   0.25   ttJets_SigRegion     ...           3     0.048625        -1          -1
3171        3171      1.0   0.25   ttJets_SigRegion     ...           3     0.065484        -1          -1
3172        3172      1.0   0.25   ttJets_SigRegion     ...           3     0.010518        -1          -1
3173        3173      1.0   0.25   ttJets_SigRegion     ...           3     0.009859        -1          -1
3174        3174      1.0   0.25   ttJets_SigRegion     ...           3     0.000036        -1          -1
3175        3175      1.0   0.25   ttJets_SigRegion     ...           3     0.006284        -1          -1
3176        3176      1.0   0.25   ttJets_SigRegion     ...           3     0.012758        -1          -1
3177        3177      1.0   0.25   ttJets_SigRegion     ...           3     0.012517        -1          -1
3178        3178      1.0   0.25   ttJets_SigRegion     ...           3     0.019521        -1          -1
3179        3179      1.0   0.25   ttJets_SigRegion     ...           3     0.005571        -1          -1
3180        3180      1.0   0.25   ttJets_SigRegion     ...           3     0.011655        -1          -1
3181        3181      1.0   0.25   ttJets_SigRegion     ...           3     0.106139        -1          -1
3182        3182      1.0   0.25   ttJets_SigRegion     ...           3     0.041379        -1          -1
3183        3183      1.0   0.25   ttJets_SigRegion     ...           3     0.005024        -1          -1
3184        3184      1.0   0.25   ttJets_SigRegion     ...           3     0.094176        -1          -1
3185        3185      1.0   0.25   ttJets_SigRegion     ...           3     0.007660        -1          -1
3186        3186      1.0   0.25   ttJets_SigRegion     ...           3     0.000660        -1          -1
3187        3187      1.0   0.25   ttJets_SigRegion     ...           3     0.006814        -1          -1
3188        3188      1.0   0.25   ttJets_SigRegion     ...           3     0.015510        -1          -1

[3189 rows x 12 columns]
finish assining bkgs, data is       Unnamed: 0  entries  error                key     ...      target  totalWeight vor_point  vor_region
0            484      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000956         0         115
1              4      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000973         1           2
2           2229      1.0   0.15  ttWJets_SigRegion     ...           2     0.001907        16          51
3           1864      1.0   0.15  ttWJets_SigRegion     ...           2     0.000271       223          46
4           2341      1.0   0.15  ttWJets_SigRegion     ...           2     0.001722       158          36
5            921      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000101         2         155
6           2013      1.0   0.15  ttWJets_SigRegion     ...           2     0.001555       101         242
7            418      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001320         3         195
8             36      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001241         4         403
9           1662      1.0   0.15  ttWJets_SigRegion     ...           2     0.001784        25          87
10           391      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000116         5         379
11           473      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000400         6         422
12           114      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000062         7          73
13          2951      1.0   0.15  ttZJets_SigRegion     ...           2     0.002104       323          32
14          2525      1.0   0.15  ttZJets_SigRegion     ...           2     0.000579        78         468
15          1231      1.0   0.15  ttWJets_SigRegion     ...           2     0.000193       291         464
16          1317      1.0   0.15  ttWJets_SigRegion     ...           2     0.002061       183         120
17          2701      1.0   0.15  ttZJets_SigRegion     ...           2     0.002733       259          83
18          1467      1.0   0.15  ttWJets_SigRegion     ...           2     0.001361       297          43
19           482      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000229         8         188
20          2224      1.0   0.15  ttWJets_SigRegion     ...           2     0.001601       173         436
21          1362      1.0   0.15  ttWJets_SigRegion     ...           2     0.003439       183         120
22           976      1.0   0.15  ttWJets_SigRegion     ...           2     0.001852       154           5
23           269      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000132         9         454
24          2558      1.0   0.15  ttZJets_SigRegion     ...           2     0.000207       163         153
25           496      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001030        10         245
26           251      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001686        11         458
27          2387      1.0   0.15  ttZJets_SigRegion     ...           2     0.000891       157          18
28           892      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000840        12         412
29          2011      1.0   0.15  ttWJets_SigRegion     ...           2     0.001016       241         261
...          ...      ...    ...                ...     ...         ...          ...       ...         ...
1565        2357      1.0   0.15  ttWJets_SigRegion     ...           2     0.001301       246         355
1566         424      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001459       470         233
1567        3170      1.0   0.25   ttJets_SigRegion     ...           3     0.048625       128          99
1568          14      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000262       471           7
1569        2477      1.0   0.15  ttZJets_SigRegion     ...           2     0.002032        15         126
1570         282      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001347       472         167
1571        2197      1.0   0.15  ttWJets_SigRegion     ...           2     0.002060       205         240
1572        2611      1.0   0.15  ttZJets_SigRegion     ...           2     0.001684        73          63
1573        3083      1.0   0.15  ttZJets_SigRegion     ...           2     0.000300       292         338
1574        1528      1.0   0.15  ttWJets_SigRegion     ...           2     0.002420       162          81
1575         183      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001302       473         102
1576        1311      1.0   0.15  ttWJets_SigRegion     ...           2     0.001698       163         153
1577         846      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001083       474         271
1578        2970      1.0   0.15  ttZJets_SigRegion     ...           2     0.000109       180         184
1579        2460      1.0   0.15  ttZJets_SigRegion     ...           2     0.000176       476         147
1580        2321      1.0   0.15  ttWJets_SigRegion     ...           2     0.000222       245         477
1581        2284      1.0   0.15  ttWJets_SigRegion     ...           2     0.001438       336         270
1582        2667      1.0   0.15  ttZJets_SigRegion     ...           2     0.004061       297          43
1583         307      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000979       475         209
1584          50      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001359       476         147
1585        2905      1.0   0.15  ttZJets_SigRegion     ...           2     0.001466        64          30
1586         590      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001702       477         320
1587         631      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001671       478         444
1588        2832      1.0   0.15  ttZJets_SigRegion     ...           2     0.002374       300         363
1589        1307      1.0   0.15  ttWJets_SigRegion     ...           2     0.001161       481         148
1590         295      1.0   0.00  ttHnobb_SigRegion     ...           1     0.000173       479         193
1591         524      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001165       480         331
1592          96      1.0   0.00  ttHnobb_SigRegion     ...           1     0.001209       481         148
1593        2388      1.0   0.15  ttZJets_SigRegion     ...           2     0.001475       154           5
1594        1709      1.0   0.15  ttWJets_SigRegion     ...           2     0.001351       389         168

[1595 rows x 12 columns] 
finish calculate siginificance, after sorting df_vor is            b1        b2  entrie_b1  entrie_b2  entrie_s     ...          sumw2_b1  sumw2_b2       sumw2_s  vor_point  vor_region
0    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  5.083881e-06        138         221
1    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  4.995209e-06        191         323
2    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  4.568453e-06        385          15
3    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  4.331601e-06        334         307
4    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  4.074964e-06         13         347
5    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.223191e-06        194         314
6    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.747734e-06        321         212
7    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.724311e-06        142         273
8    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.720943e-06        374          66
9    0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.631874e-06         99         253
10   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.044480e-06        169         435
11   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  3.034835e-06        342         107
12   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.932596e-06        184         439
13   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.926337e-06         81         375
14   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.920180e-06         17         475
15   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.898076e-06        122         238
16   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.895228e-06        477         320
17   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.805237e-06        228         171
18   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.751254e-06        303         372
19   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.749454e-06        397         306
20   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.665143e-06        102         317
21   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.589038e-06        361         141
22   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.106393e-06        260         405
23   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.496377e-06        339         404
24   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.374481e-06         42         478
25   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.324994e-06        255          22
26   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.255271e-06        264         399
27   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.167205e-06        287         215
28   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.084959e-06        218         288
29   0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  2.013841e-06        449         407
..        ...       ...        ...        ...       ...     ...               ...       ...           ...        ...         ...
452  0.006417  0.000000        3.0        0.0       1.0     ...      1.408876e-05  0.000000  5.011176e-09        375         335
453  0.000000  0.005024        0.0        1.0       1.0     ...      0.000000e+00  0.000025  1.150641e-08        413         368
454  0.000000  0.094176        0.0        1.0       1.0     ...      0.000000e+00  0.008869  2.539614e-08         26         369
455  0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  1.598897e-13        378         410
456  0.000189  0.000000        1.0        0.0       1.0     ...      3.568052e-08  0.000000  3.802473e-09        295         297
457  0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  1.550784e-13        113         292
458  0.000067  0.000000        1.0        0.0       1.0     ...      4.529770e-09  0.000000  4.380081e-09         74         479
459  0.008939  0.000000        5.0        0.0       1.0     ...      1.792608e-05  0.000000  3.539675e-09        123          56
460  0.001928  0.000000        1.0        0.0       1.0     ...      3.716943e-06  0.000000  2.628922e-09        328         226
461  0.003902  0.000000        2.0        0.0       1.0     ...      8.048551e-06  0.000000  2.335926e-09        167         349
462  0.000000  0.000000        0.0        0.0       1.0     ...      0.000000e+00  0.000000  7.506368e-14        466         131
463  0.001493  0.000000        1.0        0.0       1.0     ...      2.228058e-06  0.000000  1.088400e-09         86         133
464  0.003672  0.019521        2.0        1.0       1.0     ...      6.743665e-06  0.000308  2.334592e-09        206         428
465  0.002202  0.006446        1.0        1.0       1.0     ...      4.846880e-06  0.000042  1.403681e-09        219          20
466  0.004301  0.000000        3.0        0.0       1.0     ...      6.452878e-06  0.000000  7.808571e-10        127         333
467  0.068195  0.000000       38.0        0.0       1.0     ...      1.394569e-04  0.000000  2.495276e-09        288          12
468  0.004996  0.000000        5.0        0.0       1.0     ...      7.688314e-06  0.000000  5.410409e-10        180         184
469  0.000200  0.000000        1.0        0.0       1.0     ...      4.012037e-08  0.000000  8.664131e-11        238         272
470  0.006883  0.048927        6.0        1.0       1.0     ...      1.188787e-05  0.002394  3.848455e-10        226         151
471  0.001464  0.000000        1.0        0.0       1.0     ...      2.143364e-06  0.000000  2.337712e-11        373         343
472  0.004591  0.000000        2.0        0.0       1.0     ...      1.128094e-05  0.000000  1.512141e-11        396         161
473  0.000000  0.016588        0.0        1.0       1.0     ...      0.000000e+00  0.000275  2.142445e-11        267          39
474  0.005453  0.000000        4.0        0.0       1.0     ...      1.038671e-05  0.000000  4.009905e-13        332         258
475  0.006087  0.000000        5.0        0.0       1.0     ...      8.870296e-06  0.000000  2.048015e-13        299         163
476  0.001745  0.000000        1.0        0.0       1.0     ...      3.045750e-06  0.000000  1.545790e-13        305         442
477  0.007104  0.000000        8.0        0.0       1.0     ...      1.075861e-05  0.000000  1.866814e-13        437         230
478  0.019383  0.000000       11.0        0.0       1.0     ...      4.166495e-05  0.000000  1.059894e-13        272          80
479  0.003958  0.000000        4.0        0.0       1.0     ...      7.499071e-06  0.000000  3.026428e-15        333         200
480  0.001190  0.000000        1.0        0.0       1.0     ...      1.416658e-06  0.000000  1.343541e-15         66         364
481  0.004372  0.000000        3.0        0.0       1.0     ...      1.008936e-05  0.000000  6.115613e-16         95         402

[482 rows x 13 columns]
finish merge algorithm df_vor is saved into ../output/QT100/TrainFrac0.5_PairNegWgtSort_Delta100_GroupEvt-1_useErrFalse_minMC-1_maxErr999_df_vor.csv 
 overtrain test: 
 df_vor_train is - 
                       s       sumw2_s        b1  sumw2_b1        b2  sumw2_b2  significance
vor_label                                                                                  
0          1.419993e-01  1.860813e-04  0.000000  0.000000  0.000000  0.000000      1.756492
1          7.990881e-02  1.564720e-04  0.171732  0.000333  0.000000  0.000000      0.168042
2          7.302332e-02  1.007716e-04  0.228134  0.000426  0.016272  0.000131      0.135247
3          6.529563e-02  8.260757e-05  0.222003  0.000432  0.029921  0.000254      0.120347
4          3.342248e-02  4.444287e-05  0.141956  0.000273  0.036793  0.000326      0.073195
5          4.810681e-02  5.475950e-05  0.219438  0.000406  0.373944  0.017669      0.060199
6          1.514004e-02  1.128393e-05  0.153586  0.000278  0.322895  0.021228      0.021134
7          2.047069e-03  2.253760e-07  0.090241  0.000178  0.028897  0.000305      0.005539
8          1.248493e-03  1.409400e-07  0.111760  0.000231  0.051238  0.001809      0.002941
9          4.756857e-04  4.631278e-08  0.011856  0.000020  0.125167  0.009244      0.001092
10         1.069736e-04  3.531181e-09  0.081738  0.000161  0.048927  0.002394      0.000278
11         9.996234e-06  3.730623e-11  0.017877  0.000034  0.016588  0.000275      0.000043
12         8.740236e-07  2.976523e-13  0.036008  0.000071  0.000000  0.000000      0.000004 
 overtrain test: 
 df_vor_test is - 
                  b1        b2         s  significance  sumw2_b1  sumw2_b2   sumw2_s
vor_label                                                                          
0.0        0.166272  0.040684  0.094776      0.186352  0.000344  0.000478  0.000126
1.0        0.146845  0.227015  0.037821      0.058740  0.000285  0.025329  0.000052
2.0        0.221769  0.193146  0.046180      0.068728  0.000433  0.018891  0.000065
3.0        0.195676  0.195051  0.060625      0.092040  0.000359  0.011322  0.000079
4.0        0.137373  0.122652  0.026723      0.049593  0.000245  0.006710  0.000033
5.0        0.231463  0.263296  0.047107      0.064447  0.000466  0.016608  0.000055
6.0        0.160800  0.261970  0.037212      0.054639  0.000327  0.013435  0.000055
7.0        0.098935  0.132735  0.011461      0.022438  0.000178  0.005613  0.000014
8.0        0.134076  0.006589  0.021840      0.052897  0.000264  0.000043  0.000030
9.0        0.016742  0.000000  0.004404      0.020863  0.000029  0.000000  0.000004
10.0       0.063315  0.000000  0.006648      0.022215  0.000134  0.000000  0.000008
11.0       0.020172  0.000000  0.005709      0.025870  0.000057  0.000000  0.000010
12.0       0.019207  0.000000  0.007746      0.034607  0.000035  0.000000  0.000010
